@using System.Data;

<p>
    <table border="1">
        <tr>
            @{
                DataTable data = ViewData["TYPE_CNT"] as DataTable;

                DataTable colType = data.DefaultView.ToTable(true, new string[] { "TYPE" });
                DataTable colP = data.DefaultView.ToTable(true, new string[] { "P" });

                <td>P</td>
                foreach (DataRow row in colType.Rows)
                {
                    <td>@row["TYPE"]</td>

                }

            }
        </tr>
        @{
            foreach (DataRow row in colP.Rows)
            {
                <tr>
                    <td>@row["P"]</td>
                    @{
                        foreach (DataRow rowT in colType.Rows)
                        {
                            DataRow[] rows = data.Select(string.Format("P = '{0}' and TYPE = '{1}'", row["P"], rowT["TYPE"]));
                            if (rows.Length > 0)
                            {
                                <td>@rows[0]["CNT"]</td>

                            }
                            else
                            {
                                <td>0</td>

                            }
                        }

                    }
                </tr>
            }
        }

    </table>

</p>